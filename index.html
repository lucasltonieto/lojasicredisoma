<!doctype html>
<html lang="pt-BR">
  <head>
    <meta charset="utf-8" />
    <title>Carrinho de Compras | Sicredi Soma</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Exo+2:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
      html, body { background:#5A645A; margin:0; padding:0; font-family:'Exo 2', sans-serif; color:#fff; }
      .container { max-width:960px; margin:0 auto; padding:1.6rem 2rem 2.2rem; }
      .titulo-area { margin:0 0 2rem 0; }
      .heading-line { border-top:2px solid rgba(255,255,255,.35); margin-top:1.05rem; }
      .item-grid { display:grid; grid-template-columns:1fr 160px 54px; gap:.75rem; align-items:center; padding:.95rem 0 .8rem; border-bottom:1px solid rgba(255,255,255,.18); }
      .item-grid:last-of-type { border-bottom:2px solid rgba(255,255,255,.34); }
      .col-preco { text-align:right; font-variant-numeric: tabular-nums; white-space:nowrap; }
      .col-acoes { display:flex; justify-content:flex-end; }
      .btn-x { display:inline-flex; align-items:center; justify-content:center; width:44px; height:44px; background:#0B1014; border:1px solid rgba(255,255,255,.30); color:#FFF; border-radius:10px; text-decoration:none; font-size:18px; }
      .btn-x:hover { background:#b62828; border-color:#b62828; }
      .totais { margin-top:2rem; font-weight:700; border-top:2px solid rgba(255,255,255,.35); padding-top:1.25rem; display:flex; flex-direction:column; gap:.65rem; }
      .total-row { display:grid; grid-template-columns:1fr 180px; }
      .total-row span:last-child { text-align:right; }
      .info { background:rgba(0,0,0,.25); padding:.75rem 1rem; border-radius:.5rem; border:1px solid rgba(255,255,255,.18); margin:.5rem 0 1rem 0; }
      .url-tip { margin-top:2rem; font-size:.80rem; opacity:.88; border-top:1px dashed rgba(255,255,255,.30); padding-top:.85rem; }
      @media (max-width:780px) {
        .container { padding:1.2rem 1rem 1.6rem; }
        .item-grid { grid-template-columns:1fr auto 44px; }
      }
    </style>
  </head>
  <body>
    <div class="container">
      <div class="titulo-area">
        <h1>Carrinho de Compras</h1>
        <div class="heading-line"></div>
      </div>

      {% if carrinho_vazio %}
        <div class="info">Carrinho vazio</div>
      {% else %}
        {% for it in itens %}
          <div class="item-grid">
            <div class="col-nome">{{ it.produto }} × {{ it.qtd }}</div>
            <div class="col-preco">R$ {{ "%.2f"|format(it.subtotal) }}</div>
            <div class="col-acoes"><a class="btn-x" href="{{ it.rm_href }}">✕</a></div>
          </div>
        {% endfor %}
      {% endif %}

      {% if not carrinho_vazio %}
      <div class="totais">
        <div class="total-row"><span>Total Geral:</span><span>R$ {{ "%.2f"|format(total) }}</span></div>
        <div class="total-row"><span>Total Capital:</span><span>R$ {{ "%.2f"|format(capital) }}</span></div>
      </div>
      {% endif %}

      <div class="url-tip">
        <b>Adicionar por CÓDIGO via URL</b><br>
        • Um item: <code>?cid={{ cid_tip }}&Codigo=89&quantidade=1</code><br>
        • Também: <code>?cid={{ cid_tip }}&codigo=50&q=3</code> ou <code>?cid={{ cid_tip }}&code=50&qty=3</code><br>
        • Vários: <code>?cid={{ cid_tip }}&codes=89|2;50|1</code><br>
        • Remover: <code>?cid={{ cid_tip }}&rm=Camiseta</code> ou <code>?cid={{ cid_tip }}&rm=50</code><br>
        • Limpar: <code>?cid={{ cid_tip }}&clear=1</code><br><br>
        Todos os direitos reservados Sicredi Soma
      </div>
    </div>
  </body>
</html>